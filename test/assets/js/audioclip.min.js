/*! audioclip v0.0.0 | Richard Neil A Ilagan | license : MIT */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],2:[function(a,b){"use strict";b.exports=a("./lib/core.js"),a("./lib/done.js"),a("./lib/es6-extensions.js"),a("./lib/node-extensions.js")},{"./lib/core.js":3,"./lib/done.js":4,"./lib/es6-extensions.js":5,"./lib/node-extensions.js":6}],3:[function(a,b){"use strict";function c(a){function b(a){return null===i?void k.push(a):void f(function(){var b=i?a.onFulfilled:a.onRejected;if(null===b)return void(i?a.resolve:a.reject)(j);var c;try{c=b(j)}catch(d){return void a.reject(d)}a.resolve(c)})}function c(a){try{if(a===l)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void e(b.bind(a),c,g)}i=!0,j=a,h()}catch(d){g(d)}}function g(a){i=!1,j=a,h()}function h(){for(var a=0,c=k.length;c>a;a++)b(k[a]);k=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");var i=null,j=null,k=[],l=this;this.then=function(a,c){return new l.constructor(function(e,f){b(new d(a,c,e,f))})},e(a,c,g)}function d(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function e(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var f=a("asap");b.exports=c},{asap:7}],4:[function(a,b){"use strict";var c=a("./core.js"),d=a("asap");b.exports=c,c.prototype.done=function(){var a=arguments.length?this.then.apply(this,arguments):this;a.then(null,function(a){d(function(){throw a})})}},{"./core.js":3,asap:7}],5:[function(a,b){"use strict";function c(a){this.then=function(b){return"function"!=typeof b?this:new d(function(c,d){e(function(){try{c(b(a))}catch(e){d(e)}})})}}var d=a("./core.js"),e=a("asap");b.exports=d,c.prototype=d.prototype;var f=new c(!0),g=new c(!1),h=new c(null),i=new c(void 0),j=new c(0),k=new c("");d.resolve=function(a){if(a instanceof d)return a;if(null===a)return h;if(void 0===a)return i;if(a===!0)return f;if(a===!1)return g;if(0===a)return j;if(""===a)return k;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new d(b.bind(a))}catch(e){return new d(function(a,b){b(e)})}return new c(a)},d.all=function(a){var b=Array.prototype.slice.call(a);return new d(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},d.reject=function(a){return new d(function(b,c){c(a)})},d.race=function(a){return new d(function(b,c){a.forEach(function(a){d.resolve(a).then(b,c)})})},d.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":3,asap:7}],6:[function(a,b){"use strict";var c=a("./core.js"),d=a("asap");b.exports=c,c.denodeify=function(a,b){return b=b||1/0,function(){var d=this,e=Array.prototype.slice.call(arguments);return new c(function(c,f){for(;e.length&&e.length>b;)e.pop();e.push(function(a,b){a?f(a):c(b)});var g=a.apply(d,e);!g||"object"!=typeof g&&"function"!=typeof g||"function"!=typeof g.then||c(g)})}},c.nodeify=function(a){return function(){var b=Array.prototype.slice.call(arguments),e="function"==typeof b[b.length-1]?b.pop():null,f=this;try{return a.apply(this,arguments).nodeify(e,f)}catch(g){if(null===e||"undefined"==typeof e)return new c(function(a,b){b(g)});d(function(){e.call(f,g)})}}},c.prototype.nodeify=function(a,b){return"function"!=typeof a?this:void this.then(function(c){d(function(){a.call(b,null,c)})},function(c){d(function(){a.call(b,c)})})}},{"./core.js":3,asap:7}],7:[function(a,b){(function(a){function c(){for(;e.next;){e=e.next;var a=e.task;e.task=void 0;var b=e.domain;b&&(e.domain=void 0,b.enter());try{a()}catch(d){if(i)throw b&&b.exit(),setTimeout(c,0),b&&b.enter(),d;setTimeout(function(){throw d},0)}b&&b.exit()}g=!1}function d(b){f=f.next={task:b,domain:i&&a.domain,next:null},g||(g=!0,h())}var e={task:void 0,next:null},f=e,g=!1,h=void 0,i=!1;if("undefined"!=typeof a&&a.nextTick)i=!0,h=function(){a.nextTick(c)};else if("function"==typeof setImmediate)h="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=c,h=function(){j.port2.postMessage(0)}}else h=function(){setTimeout(c,0)};b.exports=d}).call(this,a("_process"))},{_process:1}],8:[function(a,b,c){"use strict";var d=function(a){return a&&a.__esModule?a["default"]:a};a("./utils/polyfills/catalog.es6");var e=(d(a("./utils/audioContextWrapper.es6")),d(a("./classes/AudioBuffer.es6"))),f=d(a("./classes/AudioCabinet.es6")),g=function(a){var b=new e(a);b.__promise["catch"](function(a){throw new Error(a.msg)});var c=function(a,c,d){b.play(a,c,d)};return c.buffer=b,c};g.createCabinet=function(){return new f},(window||c).audioclip=g},{"./classes/AudioBuffer.es6":9,"./classes/AudioCabinet.es6":11,"./utils/audioContextWrapper.es6":13,"./utils/polyfills/catalog.es6":15}],9:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function k(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:k(e,b,c)}if("value"in d&&d.writable)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},f=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},g=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},h=c(a("promise")),i=c(a("./AudioSourceNode.es6")),j=function(a){function b(a){var c=this;g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.__promise=new h(function(b,d){var e=new XMLHttpRequest;e.open("GET",a,!0),e.responseType="arraybuffer",e.onload=function(){c.__context.decodeAudioData(e.response,function(a){c.__buffer=a,c.init(),b(a)},function(b){d({err:b,msg:"Error while fetching audio file : "+a})})},e.send()})}return f(b,a),d(b,{init:{value:function(){var a=this.createSource();return a.buffer=this.__buffer,a.connect(this.__context.destination),this.__sourcenode=a,this}},play:{value:function(){var a=this,b=void 0===arguments[0]?0:arguments[0],c=void 0===arguments[1]?0:arguments[1],d=void 0===arguments[2]?this.__buffer.duration-c:arguments[2];return function(){return b=Number.isFinite(b)?b:0,c=Math.max(0,Math.min(a.__buffer.duration,Number.isFinite(c)?c:0)),d=Number.isFinite(d)?d:a.__buffer.duration-c,console.log(b),a.__sourcenode.start(a.__context.currentTime+b,c,d),a.init()}()}}},{resolve:{value:function(a){var c=void 0;return c=a instanceof b?a:"function"==typeof a&&a.buffer instanceof b?a.buffer:new b(a)}}}),b}(i);b.exports=j},{"./AudioSourceNode.es6":12,promise:2}],10:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function k(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:k(e,b,c)}if("value"in d&&d.writable)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},f=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},g=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},h=c(a("./AudioBuffer.es6")),i=c(a("./AudioSourceNode.es6")),j=function(a){function b(a){if(g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.buffer=h.resolve(a),!this.buffer instanceof h)throw new TypeError("buffer is not a valid audio buffer.");this.__timings=[]}return f(b,a),d(b,{beat:{value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return b.length?(Array.prototype.push.apply(this.__timings,b.filter(function(a){return Number.isFinite(a)&&a>=0})),this.__timings.sort(function(a,b){return a-b}),void(this.__timings=this.__timings.filter(function(a,b,c){return c.indexOf(a)===b}))):this.__timings}},play:{value:function(){var a=void 0===arguments[0]?.5:arguments[0],b=this.__timings.length>>>0;if(0===b)this.buffer.play();else for(var c=0;b>c;c++){var d=this.__timings[c]*a;this.buffer.play(d)}}}}),b}(i);b.exports=j},{"./AudioBuffer.es6":9,"./AudioSourceNode.es6":12}],11:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},f=c(a("../utils/audioContextWrapper.es6")),g=(c(a("./AudioBuffer.es6")),c(a("./AudioBufferEffector.es6"))),h=function(){function a(b){e(this,a),this.__clips={},this.init().bpm(b)}return d(a,{init:{value:function(){var a=f.getContext(),b=a.createBufferSource();return b.connect(a.destination),this.__source=b,this}},bpm:{value:function(){var a=void 0===arguments[0]?120:arguments[0];return this.__beattime=60/a,this}},clip:{value:function(a,b){var c=new g(b);return this.__clips[a]&&console.warn("An audio clip is already registered under the name ",a),this.__clips[a]=c,c}},play:{value:function(){for(var a=Object.keys(this.__clips),b=a.length>>>0,c=0;b>c;c++)this.__clips[a[c]].play(this.__beattime)}}}),a}();b.exports=h},{"../utils/audioContextWrapper.es6":13,"./AudioBuffer.es6":9,"./AudioBufferEffector.es6":10}],12:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},f=c(a("../utils/audioContextWrapper.es6")),g=function(){function a(){e(this,a),this.__context=f.getContext()}return d(a,{createSource:{value:function(){return this.__context.createBufferSource()}}}),a}();b.exports=g},{"../utils/audioContextWrapper.es6":13}],13:[function(a,b){"use strict";var c=void 0;try{c=new(window.AudioContext||window.webkitAudioContext)}catch(d){console.error("This browser does not support the Web Audio API.")}b.exports={getContext:function(){if(!c)throw new Error("This browser does not support the Web Audio API.");return c},isContextSupported:function(){return!!c}}},{}],14:[function(){"use strict";Array.prototype.filter=Array.prototype.filter||function(a){var b=void 0===arguments[1]?void 0:arguments[1];if(void 0===this||null===this)throw new TypeError;if("function"!=typeof a)throw new TypeError;for(var c=Object(this),d=c.length>>>0,e=[],f=0;d>f;i++)if(i in c){var g=c[i];a.call(b,g,f,c)&&e.push(g)}return e}},{}],15:[function(a){"use strict";a("./array/filter.polyfill.es6"),a("./object/keys.polyfill.es6")},{"./array/filter.polyfill.es6":14,"./object/keys.polyfill.es6":16}],16:[function(){"use strict";Object.keys=Object.keys||function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;d>h;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()},{}]},{},[8]);